{"ast":null,"code":"import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      var i = g[name];\n      if (\"number\" == typeof i) groups[name] = result[i];else {\n        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length;) k++;\n\n        groups[name] = result[i[k]];\n      }\n      return groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    if (result) {\n      result.groups = buildGroups(result, this);\n      var indices = result.indices;\n      indices && (indices.groups = buildGroups(indices, this));\n    }\n\n    return result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        var group = groups[name];\n        return \"$\" + (Array.isArray(group) ? group.join(\"$\") : group);\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\n\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\n\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\n\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n\n  return Math.min(30, Math.max(1, limit));\n}\n\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\n\nvar rateLimitThrottle = function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n      logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n\n      isCalculated = true;\n    }\n\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n};\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\n\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n      _instance$defaults$re = _instance$defaults.responseLogger,\n      responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n      _instance$defaults$re2 = _instance$defaults.requestLogger,\n      requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error); // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    } // Retried already for max attempts\n\n\n    var doneAttempts = config.attempts || 1;\n\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts); // Errors without response did not receive anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\")); // increase attempts counter\n\n      config.attempts = doneAttempts + 1;\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n} // Matches 'sub.host:port' or 'host:port' and extracts hostname and port\n// Also enforces toplevel domain specified, no spaces and no protocol\n\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n\n  rateLimit(instance, config.retryLimit);\n\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n\n  return instance;\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\n\n\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n} // copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\n\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return Object.freeze(object);\n}\n\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n\n  if (!win) {\n    return null;\n  }\n\n  var userAgent = win.navigator.userAgent; // TODO: platform is deprecated.\n\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n\n  return null;\n}\n\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\n\n\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\n\n\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n      response = errorResponse.response;\n  var errorName; // Obscure the Management token\n\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };","map":{"version":3,"sources":["C:/contentful-angular/node_modules/contentful-sdk-core/dist/index.es-modules.js"],"names":["copy","qs","isString","pThrottle","isPlainObject","_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","constructor","prototype","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","_groups","WeakMap","flags","_this","set","get","_setPrototypeOf","buildGroups","result","g","reduce","name","k","create","_inherits","exec","str","indices","replace","substitution","_","group","Array","isArray","join","args","slice","_toPropertyKey","configurable","writable","subClass","superClass","TypeError","o","p","setPrototypeOf","bind","__proto__","_slicedToArray","_arrayWithHoles","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","n","toString","from","test","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","s","e","f","normalCompletion","didErr","step","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","arg","isNode","process","browser","isReactNative","window","navigator","product","getNodeVersion","versions","node","concat","version","getWindow","noop","PERCENTAGE_REGEX","calculateLimit","type","max","limit","_type$match","match","percentage","parseInt","Math","round","min","createThrottle","logger","interval","strict","rateLimitThrottle","axiosInstance","_axiosInstance$defaul","defaults","logHandler","throttle","isCalculated","requestInterceptorId","interceptors","request","use","config","error","Promise","reject","responseInterceptorId","response","headers","rawLimit","nextLimit","eject","delay","ms","resolve","setTimeout","defaultWait","attempts","pow","SQRT2","rateLimit","instance","maxRetry","_instance$defaults","_instance$defaults$re","responseLogger","_instance$defaults$re2","requestLogger","retryOnError","doneAttempts","retryErrorType","wait","status","floor","random","httpAgent","httpsAgent","then","asyncToken","getToken","accessToken","Authorization","HOST_REGEX","createHttpClient","axios","options","defaultConfig","insecure","level","data","title","message","a","console","log","timeout","proxy","basePath","adapter","maxContentLength","maxBodyLength","missingAccessTokenError","protocol","space","hostname","defaultHostname","port","host","parsed","split","_parsed","Boolean","baseURL","axiosOptions","paramsSerializer","stringify","httpClientParams","cloneWithNewParams","newParams","onBeforeRequest","retryLimit","onError","createRequestConfig","_ref","query","resolveLinks","params","enforceObjPath","path","Error","JSON","deepFreeze","propNames","getOwnPropertyNames","_iterator","_step","freeze","freezeSys","sys","getBrowserOS","win","userAgent","platform","macosPlatforms","windowsPlatforms","iosPlatforms","indexOf","getNodeOS","platformMap","android","aix","darwin","freebsd","linux","openbsd","sunos","win32","getUserAgentHeader","sdk","application","integration","feature","headerParts","item","toPlainObject","errorHandler","errorResponse","errorName","token","substr","errorData","statusText","details","url","method","payloadData","requestId","id","_unused","_errorData$message"],"mappings":"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","sourcesContent":["import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n  var _super = RegExp.prototype,\n    _groups = new WeakMap();\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n    return Object.keys(g).reduce(function (groups, name) {\n      var i = g[name];\n      if (\"number\" == typeof i) groups[name] = result[i];else {\n        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length;) k++;\n        groups[name] = result[i[k]];\n      }\n      return groups;\n    }, Object.create(null));\n  }\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n    if (result) {\n      result.groups = buildGroups(result, this);\n      var indices = result.indices;\n      indices && (indices.groups = buildGroups(indices, this));\n    }\n    return result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        var group = groups[name];\n        return \"$\" + (Array.isArray(group) ? group.join(\"$\") : group);\n      }));\n    }\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function () {};\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\nfunction getWindow() {\n  return window;\n}\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n  return Math.min(30, Math.max(1, limit));\n}\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\nvar rateLimitThrottle = (function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n    logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n      isCalculated = true;\n    }\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n});\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n    _instance$defaults$re = _instance$defaults.responseLogger,\n    responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n    _instance$defaults$re2 = _instance$defaults.requestLogger,\n    requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error);\n    // Do not retry if it is disabled or no request config exists (not an axios error)\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    }\n\n    // Retried already for max attempts\n    var doneAttempts = config.attempts || 1;\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts);\n\n    // Errors without response did not receive anything from the server\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit';\n      // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\"));\n\n      // increase attempts counter\n      config.attempts = doneAttempts + 1;\n\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n}\n\n// Matches 'sub.host:port' or 'host:port' and extracts hostname and port\n// Also enforces toplevel domain specified, no spaces and no protocol\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  }\n\n  // Construct axios baseURL option\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  }\n\n  // Ensure that basePath does start but not end with a slash\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  }\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n  rateLimit(instance, config.retryLimit);\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n  return instance;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n  return true;\n}\n\n// copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n  var _iterator = _createForOfIteratorHelper(propNames),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return Object.freeze(object);\n}\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n  if (!win) {\n    return null;\n  }\n  var userAgent = win.navigator.userAgent;\n  // TODO: platform is deprecated.\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n  return null;\n}\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n  return null;\n}\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n    response = errorResponse.response;\n  var errorName;\n\n  // Obscure the Management token\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };\n"]},"metadata":{},"sourceType":"module"}